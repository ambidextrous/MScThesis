# Implementing Type-Checking Communication Protocols in the Go Programming Language with Gobble

A thesis submitted to the University of Glasgow towards the degree of MSc in Software Development.

## Grade awarded

A (First Class Honours)

## Abstract

The increasing importance of communication between the elements of concurrent and distributed systems presents software developers with the practical challenge of ensuring that different system elements communicate with one another in accordance with well-formed protocols which will prevent deadlocks from occurring. The Scribble protocol description language and its associated tools allow developers to define and test communication protocols in order to ensure their well-formedness using mathematical analysis techniques based on the Ï€-calculus. The Go programming language has in-built primitives designed to facilitate communication within both concurrent and distributed systems based on the communication sequential process (CSP) calculus. The purpose of this paper is to introduce Gobble, a source-to-source compiler which converts well-formed Scribble protocols into Go code in which protocol adherence is ensured by the use of session types: formal, structured descriptions of a protocol which specify for each message sent a data type, a sequential position and a direction. The implementation makes use of coroutines and channels, two of Go's CSP-inspired features designed to facilitate concurrent computing. The user can decide whether to produce an implementation for use on a single system that defines communication across channels between concurrently running co-routines or one for use on a distributed system which defines communication across a TCP connection. They can also decide whether to use Gobble's automatically generated implementation of the protocol or to write their own using the Gobble API.

## Example

A simple working example of Gobble output can be found [here](https://play.golang.org/p/SpluXoId8X).

## Set-up instructions

The following are instructions for building and running Gobble on a Linux debian system:

To build Gobble run: `go build main.go lexer.go parser.go translator.go writer_main.go writer_methods.go writer_network.go writer_functions.go`.

This will produce a binary build of Gobble with the name `main` and no extension (this file can be renamed, e.g. as `gobble.bin`, if desired).

To use Gobble then run the executable at the command line giving Gobble the names of one or more validated Scribble local protocol files 
(with the extension `.scr`) as arguments: e.g. `./main myScribbleProtocol.scr` or `./gobble.bin myScribbleProtocol.scr`.

If one `.scr` file is given as an argument a network-enable protocol for inter-system communication across a TCP connection will be generated as output.
If multiple `.scr` files are given as arguments a combined programme for intra-system communication across go channels will be generated as output.
To run the generated files cd into the relevant subdirectory of the `output` directory generated by Gobble and run `go run *.go`.
